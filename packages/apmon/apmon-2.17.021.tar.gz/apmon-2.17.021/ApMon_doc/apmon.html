<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>Python: module apmon</title>
  <style type="text/css"><!--
TT { font-family: lucidatypewriter, lucida console, courier }
--></style>
</head>
<body bgcolor="#f0f0f8">
<table border="0" cellpadding="2" cellspacing="0" width="100%">
  <tbody>
    <tr bgcolor="#7799ee">
      <td valign="bottom"><small>&nbsp;<br>
      </small><font color="#ffffff" face="helvetica, arial">&nbsp;<br>
      <big><big><strong>apmon</strong></big></big></font></td>
      <td align="right" valign="bottom"><font color="#ffffff"
 face="helvetica, arial">&nbsp;</font></td>
    </tr>
  </tbody>
</table>
<p><small><tt>*&nbsp;<a href="#ApMon">ApMon</a>&nbsp;-&nbsp;Application&nbsp;Monitoring&nbsp;Tool<br>
*&nbsp;Version:&nbsp;2.2.0</tt></small></p>
<table border="0" cellpadding="2" cellspacing="0" width="100%">
  <tbody>
    <tr bgcolor="#aa55cc">
      <td colspan="3" valign="bottom"><small><small>&nbsp;<br>
      </small></small><font color="#fffff0" face="helvetica, arial"><big><strong>Modules</strong></big></font></td>
    </tr>
    <tr>
      <td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td>
      <td>&nbsp;&nbsp;</td>
      <td width="100%">
      <table width="100%">
        <tbody>
          <tr>
            <td height="59" valign="top" width="25%"><a
 href="Logger.html">Logger</a><br>
            <a href="ProcInfo.html">ProcInfo</a><br>
            <br>
            </td>
            <td valign="top" width="25%"><br>
            </td>
            <td valign="top" width="25%"><br>
            </td>
            <td valign="top" width="25%"><br>
            </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
  </tbody>
</table>
<p>
<table border="0" cellpadding="2" cellspacing="0" width="100%">
  <tbody>
    <tr bgcolor="#ee77aa">
      <td colspan="3" valign="bottom"><small><small>&nbsp;<br>
      </small></small><font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td>
    </tr>
    <tr>
      <td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td>
      <td>&nbsp;&nbsp;</td>
      <td width="100%">
      <dl>
        <dt><font face="helvetica, arial"><small><a
 href="apmon.html#ApMon">ApMon</a>
          </small></font></dt>
      </dl>
      <p>
      <table border="0" cellpadding="2" cellspacing="0" width="100%">
        <tbody>
          <tr bgcolor="#ffc8d8">
            <td colspan="3" valign="bottom"><small><small>&nbsp;<br>
            </small></small><font color="#000000"
 face="helvetica, arial"><a name="ApMon">class <strong>ApMon</strong></a></font></td>
          </tr>
          <tr bgcolor="#ffc8d8">
            <td rowspan="2"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td>
            <td colspan="2"><small><tt>Main&nbsp;class&nbsp;for&nbsp;sending&nbsp;monitoring&nbsp;data&nbsp;to&nbsp;a&nbsp;MonaLisa&nbsp;module.<br>
One&nbsp;or&nbsp;more&nbsp;destinations&nbsp;can&nbsp;be&nbsp;chosen&nbsp;for&nbsp;the&nbsp;data.&nbsp;See&nbsp;constructor.<br>
&nbsp;<br>
The&nbsp;data&nbsp;is&nbsp;packed&nbsp;in&nbsp;UDP&nbsp;datagrams,&nbsp;using&nbsp;XDR.&nbsp;The&nbsp;following&nbsp;fields&nbsp;are&nbsp;sent:<br>
-&nbsp;version&nbsp;&amp;&nbsp;password&nbsp;(string)<br>
-&nbsp;cluster&nbsp;name&nbsp;(string)<br>
-&nbsp;node&nbsp;name&nbsp;(string)<br>
-&nbsp;number&nbsp;of&nbsp;parameters&nbsp;(int)<br>
-&nbsp;for&nbsp;each&nbsp;parameter:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;name&nbsp;(string)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;value&nbsp;type&nbsp;(int)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;value<br>
-&nbsp;optionally&nbsp;a&nbsp;(int)&nbsp;with&nbsp;the&nbsp;given&nbsp;timestamp<br>
&nbsp;<br>
Attributes&nbsp;(public):<br>
-&nbsp;destinations&nbsp;-&nbsp;a&nbsp;list&nbsp;containing&nbsp;(ip,&nbsp;port,&nbsp;password)&nbsp;tuples<br>
-&nbsp;configAddresses&nbsp;-&nbsp;list&nbsp;with&nbsp;files&nbsp;and&nbsp;urls&nbsp;from&nbsp;where&nbsp;the&nbsp;config&nbsp;is&nbsp;read<br>
-&nbsp;configRecheckInterval&nbsp;-&nbsp;period,&nbsp;in&nbsp;seconds,&nbsp;to&nbsp;check&nbsp;for&nbsp;changes&nbsp;<br>
&nbsp;&nbsp;in&nbsp;the&nbsp;configAddresses&nbsp;list<br>
-&nbsp;configRecheck&nbsp;-&nbsp;boolean&nbsp;-&nbsp;whether&nbsp;to&nbsp;recheck&nbsp;periodically&nbsp;for&nbsp;changes&nbsp;<br>
&nbsp;&nbsp;in&nbsp;the&nbsp;configAddresses&nbsp;list<br>
&nbsp;</tt></small></td>
          </tr>
          <tr>
            <td>&nbsp;&nbsp;</td>
            <td width="100%">
            <dl>
              <dt><br>
              </dt>
            </dl>
            <dl>
              <dt><a name="ApMon-__init__"><strong>__init__</strong></a>(self,
initValue)</dt>
            </dl>
            <dl>
              <dd><small><tt>Class&nbsp;constructor:<br>
-&nbsp;if&nbsp;initValue&nbsp;is&nbsp;a&nbsp;string,&nbsp;put&nbsp;it&nbsp;in&nbsp;configAddresses&nbsp;and&nbsp;load&nbsp;destinations<br>
&nbsp;&nbsp;from&nbsp;the&nbsp;file&nbsp;named&nbsp;like&nbsp;that.&nbsp;if&nbsp;it&nbsp;starts&nbsp;with&nbsp;"http://",&nbsp;the&nbsp;configuration&nbsp;<br>
&nbsp;&nbsp;is&nbsp;loaded&nbsp;from&nbsp;that&nbsp;URL.&nbsp;For&nbsp;background&nbsp;monitoring,&nbsp;given&nbsp;parameters&nbsp;will&nbsp;overwrite&nbsp;defaults<br>
&nbsp;<br>
-&nbsp;if&nbsp;initValue&nbsp;is&nbsp;a&nbsp;list,&nbsp;put&nbsp;its&nbsp;contents&nbsp;in&nbsp;configAddresses&nbsp;and&nbsp;create&nbsp;<br>
&nbsp;&nbsp;the&nbsp;list&nbsp;of&nbsp;destinations&nbsp;from&nbsp;all&nbsp;those&nbsp;sources.&nbsp;For&nbsp;background&nbsp;monitoring,&nbsp;<br>
&nbsp;&nbsp;given&nbsp;parameters&nbsp;will&nbsp;overwrite&nbsp;defaults&nbsp;(see&nbsp;__defaultOptions)<br>
&nbsp;<br>
-&nbsp;if&nbsp;initValue&nbsp;is&nbsp;a&nbsp;tuple&nbsp;(of&nbsp;strings),&nbsp;initialize&nbsp;destinations&nbsp;with&nbsp;that&nbsp;values.<br>
&nbsp;&nbsp;Strings&nbsp;in&nbsp;this&nbsp;tuple&nbsp;have&nbsp;this&nbsp;form:&nbsp;"{hostname|ip}[:port][&nbsp;passwd]",&nbsp;the<br>
&nbsp;&nbsp;default&nbsp;port&nbsp;being&nbsp;8884&nbsp;and&nbsp;the&nbsp;default&nbsp;password&nbsp;being&nbsp;"".&nbsp;Background&nbsp;monitoring&nbsp;will&nbsp;be<br>
&nbsp;&nbsp;enabled&nbsp;sending&nbsp;the&nbsp;parameters&nbsp;active&nbsp;from&nbsp;__defaultOptions&nbsp;(see&nbsp;end&nbsp;of&nbsp;file)<br>
&nbsp;<br>
-&nbsp;if&nbsp;initValue&nbsp;is&nbsp;a&nbsp;hash&nbsp;(key&nbsp;=&nbsp;string(hostname|ip[:port][&nbsp;passwd]),<br>
&nbsp;&nbsp;val&nbsp;=&nbsp;hash{'param_name':&nbsp;True/False,&nbsp;...})&nbsp;the&nbsp;given&nbsp;options&nbsp;for&nbsp;each&nbsp;destination&nbsp;<br>
&nbsp;&nbsp;will&nbsp;overwrite&nbsp;the&nbsp;default&nbsp;parameters&nbsp;(see&nbsp;__defaultOptions)</tt></small>
              </dd>
            </dl>
            <dl>
              <dt><a name="ApMon-__del__"><strong>__del__</strong></a>(self)
              </dt>
              <dd><small><tt>&nbsp;Destructor</tt></small> </dd>
              <dt><small><tt></tt></small><br>
              </dt>
            </dl>
            <dl>
              <dt><a name="ApMon-addJobToMonitor"><strong>addJobToMonitor</strong></a>(self,
pid, workDir, clusterName, nodeName)</dt>
              <dd><small><tt>Add&nbsp;a&nbsp;new&nbsp;job&nbsp;to&nbsp;monitor.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-enableBgMonitoring"><strong>enableBgMonitoring</strong></a>(self,
onOff)</dt>
              <dd><small><tt>Enable&nbsp;or&nbsp;disable&nbsp;background&nbsp;monitoring.&nbsp;Note&nbsp;that&nbsp;background&nbsp;monitoring&nbsp;information<br>
can&nbsp;still&nbsp;be&nbsp;sent&nbsp;if&nbsp;user&nbsp;calls&nbsp;the&nbsp;sendBgMonitoring&nbsp;method.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-free"><strong>free</strong></a>(self)</dt>
              <dd><small><tt>Stop&nbsp;background&nbsp;threands,&nbsp;close&nbsp;opened&nbsp;sockets.&nbsp;You&nbsp;have&nbsp;to&nbsp;use&nbsp;this&nbsp;function&nbsp;if&nbsp;you&nbsp;want&nbsp;to<br>
free&nbsp;all&nbsp;the&nbsp;resources&nbsp;that&nbsp;<a href="#ApMon">ApMon</a>&nbsp;takes,&nbsp;and&nbsp;allow&nbsp;it&nbsp;to&nbsp;be&nbsp;garbage-collected.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-removeJobToMonitor"><strong>removeJobToMonitor</strong></a>(self,
pid)</dt>
              <dd><small><tt>Remove&nbsp;a&nbsp;job&nbsp;from&nbsp;being&nbsp;monitored.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-sendBgMonitoring"><strong>sendBgMonitoring</strong></a>(self)</dt>
              <dd><small><tt>Send&nbsp;now&nbsp;background&nbsp;monitoring&nbsp;about&nbsp;system&nbsp;and&nbsp;jobs&nbsp;to&nbsp;all&nbsp;interested&nbsp;destinations.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-sendParameter"><strong>sendParameter</strong></a>(self,
clusterName, nodeName, paramName, paramValue)</dt>
              <dd><small><tt>Send&nbsp;a&nbsp;single&nbsp;parameter&nbsp;to&nbsp;MonALISA.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-sendParameters"><strong>sendParameters</strong></a>(self,
clusterName, nodeName, params)</dt>
              <dd><small><tt>Send&nbsp;multiple&nbsp;parameters&nbsp;specifying&nbsp;cluster&nbsp;and&nbsp;node&nbsp;name&nbsp;for&nbsp;them</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-sendParams"><strong>sendParams</strong></a>(self,
params)</dt>
              <dd><small><tt>Send&nbsp;multiple&nbsp;parameters&nbsp;to&nbsp;MonALISA,&nbsp;with&nbsp;default&nbsp;(last&nbsp;given)&nbsp;cluser&nbsp;and&nbsp;node&nbsp;names.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-sendTimedParameter"><strong>sendTimedParameter</strong></a>(self,
clusterName, nodeName, timeStamp, paramName, paramValue)</dt>
              <dd><small><tt>Send&nbsp;a&nbsp;single&nbsp;parameter,&nbsp;with&nbsp;a&nbsp;given&nbsp;time.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-sendTimedParameters"><strong>sendTimedParameters</strong></a>(self,
clusterName, nodeName, timeStamp, params)</dt>
              <dd><small><tt>Send&nbsp;multiple&nbsp;monitored&nbsp;parameters&nbsp;to&nbsp;MonALISA.&nbsp;<br>
&nbsp;<br>
-&nbsp;clusterName&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;cluster&nbsp;being&nbsp;monitored.&nbsp;The&nbsp;first<br>
&nbsp;&nbsp;time&nbsp;this&nbsp;function&nbsp;is&nbsp;called,&nbsp;this&nbsp;paramenter&nbsp;must&nbsp;not&nbsp;be&nbsp;None.&nbsp;Then,<br>
&nbsp;&nbsp;it&nbsp;can&nbsp;be&nbsp;None;&nbsp;last&nbsp;given&nbsp;clusterName&nbsp;will&nbsp;be&nbsp;used&nbsp;instead.<br>
-&nbsp;nodeName&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;node&nbsp;for&nbsp;which&nbsp;are&nbsp;the&nbsp;parameters.&nbsp;If&nbsp;this<br>
&nbsp;&nbsp;is&nbsp;None,&nbsp;the&nbsp;full&nbsp;hostname&nbsp;of&nbsp;this&nbsp;machine&nbsp;will&nbsp;be&nbsp;sent&nbsp;instead.<br>
-&nbsp;timeStamp,&nbsp;if&nbsp;&gt;&nbsp;0,&nbsp;is&nbsp;given&nbsp;time&nbsp;for&nbsp;the&nbsp;parameters.&nbsp;This&nbsp;is&nbsp;in&nbsp;seconds&nbsp;from&nbsp;Epoch.<br>
&nbsp;&nbsp;Note&nbsp;that&nbsp;this&nbsp;option&nbsp;should&nbsp;be&nbsp;used&nbsp;only&nbsp;if&nbsp;you&nbsp;are&nbsp;sure&nbsp;about&nbsp;the&nbsp;time&nbsp;for&nbsp;the&nbsp;result.<br>
&nbsp;&nbsp;Otherwize,&nbsp;the&nbsp;parameters&nbsp;will&nbsp;be&nbsp;assigned&nbsp;a&nbsp;correct&nbsp;time&nbsp;(obtained&nbsp;from&nbsp;NTP&nbsp;servers)<br>
&nbsp;&nbsp;in&nbsp;MonALISA&nbsp;service.&nbsp;This&nbsp;option&nbsp;can&nbsp;be&nbsp;usefull&nbsp;when&nbsp;parsing&nbsp;logs,&nbsp;for&nbsp;example.<br>
-&nbsp;params&nbsp;is&nbsp;a&nbsp;dictionary&nbsp;containing&nbsp;pairs&nbsp;with:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;key:&nbsp;parameter&nbsp;name<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;value:&nbsp;parameter&nbsp;value,&nbsp;either&nbsp;int&nbsp;or&nbsp;float.<br>
&nbsp;&nbsp;or&nbsp;params&nbsp;is&nbsp;a&nbsp;vector&nbsp;of&nbsp;tuples&nbsp;(key,&nbsp;value).&nbsp;This&nbsp;version&nbsp;can&nbsp;be&nbsp;used<br>
&nbsp;&nbsp;in&nbsp;case&nbsp;you&nbsp;want&nbsp;to&nbsp;send&nbsp;the&nbsp;parameters&nbsp;in&nbsp;a&nbsp;given&nbsp;order.<br>
&nbsp;<br>
NOTE&nbsp;that&nbsp;python&nbsp;doesn't&nbsp;know&nbsp;about&nbsp;32-bit&nbsp;floats&nbsp;(only&nbsp;64-bit&nbsp;floats!)</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-sendTimedParams"><strong>sendTimedParams</strong></a>(self,
timeStamp, params)</dt>
              <dd><small><tt>Send&nbsp;multiple&nbsp;parameters,&nbsp;specifying&nbsp;the&nbsp;time&nbsp;for&nbsp;them,&nbsp;with&nbsp;default&nbsp;(last&nbsp;given)&nbsp;cluster&nbsp;and&nbsp;node&nbsp;names.&nbsp;<br>
(See&nbsp;sendTimedParameters&nbsp;for&nbsp;more&nbsp;details)</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-setLogLevel"><strong>setLogLevel</strong></a>(self,
strLevel)</dt>
              <dd><small><tt>Change&nbsp;the&nbsp;log&nbsp;level.&nbsp;Given&nbsp;level&nbsp;is&nbsp;a&nbsp;string,&nbsp;one&nbsp;of&nbsp;'FATAL',&nbsp;'ERROR',&nbsp;'WARNING',&nbsp;<br>
'INFO',&nbsp;'NOTICE',&nbsp;'DEBUG'.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-setMaxMsgRate"><strong>setMaxMsgRate</strong></a>(self,
rate)</dt>
              <dd><small><tt>Set&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;messages&nbsp;that&nbsp;can&nbsp;be&nbsp;sent,&nbsp;per&nbsp;second.</tt></small></dd>
            </dl>
            <dl>
              <dt><a name="ApMon-setMonitorClusterNode"><strong>setMonitorClusterNode</strong></a>(self,
clusterName, nodeName)</dt>
              <dd><small><tt>Set&nbsp;the&nbsp;cluster&nbsp;and&nbsp;node&nbsp;names&nbsp;where&nbsp;to&nbsp;send&nbsp;system&nbsp;related&nbsp;information.</tt></small></dd>
            </dl>
            <dl>
              <dt><br>
              </dt>
            </dl>
            </td>
          </tr>
        </tbody>
      </table>
      </p>
      </td>
    </tr>
  </tbody>
</table>
</p>
</body>
</html>
