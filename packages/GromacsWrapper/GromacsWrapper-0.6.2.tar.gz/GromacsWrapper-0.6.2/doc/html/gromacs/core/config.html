<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>gromacs.config – Configuration for GromacsWrapper &mdash; GromacsWrapper 0.6.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/GromacsWrapper_logo_32x32.ico"/>
    <link rel="top" title="GromacsWrapper 0.6.1 documentation" href="../../index.html" />
    <link rel="up" title="Gromacs core modules" href="../core.html" />
    <link rel="next" title="gromacs.environment – Run time modification of behaviour" href="environment.html" />
    <link rel="prev" title="gromacs.core – Core functionality" href="core.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="environment.html" title="gromacs.environment – Run time modification of behaviour"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="core.html" title="gromacs.core – Core functionality"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">GromacsWrapper 0.6.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../gromacs.html" >GromacsWrapper package</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../core.html" accesskey="U">Gromacs core modules</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/GromacsWrapper_logo_200x200.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">gromacs.config</span></code> &#8211; Configuration for GromacsWrapper</a><ul>
<li><a class="reference internal" href="#configuration-management">Configuration management</a><ul>
<li><a class="reference internal" href="#users">Users</a></li>
<li><a class="reference internal" href="#developers">Developers</a></li>
<li><a class="reference internal" href="#accessing-configuration-and-template-files">Accessing configuration and template files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#logging">Logging</a></li>
<li><a class="reference internal" href="#gromacs-tools-and-scripts">Gromacs tools and scripts</a><ul>
<li><a class="reference internal" href="#setting-up-the-environment">Setting up the environment</a></li>
<li><a class="reference internal" href="#list-of-tools">List of tools</a></li>
</ul>
</li>
<li><a class="reference internal" href="#location-of-template-files">Location of template files</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="core.html"
                        title="previous chapter"><code class="docutils literal"><span class="pre">gromacs.core</span></code> &#8211; Core functionality</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="environment.html"
                        title="next chapter"><code class="docutils literal"><span class="pre">gromacs.environment</span></code> &#8211; Run time modification of behaviour</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/gromacs/core/config.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-gromacs.config"></span><div class="section" id="gromacs-config-configuration-for-gromacswrapper">
<h1><a class="reference internal" href="#module-gromacs.config" title="gromacs.config"><code class="xref py py-mod docutils literal"><span class="pre">gromacs.config</span></code></a> &#8211; Configuration for GromacsWrapper<a class="headerlink" href="#gromacs-config-configuration-for-gromacswrapper" title="Permalink to this headline">¶</a></h1>
<p>The config module provides configurable options for the whole package;
It serves to define how to handle log files, set where template files are
located and which gromacs tools are exposed in the <a class="reference internal" href="../init.html#module-gromacs" title="gromacs"><code class="xref py py-mod docutils literal"><span class="pre">gromacs</span></code></a> package.</p>
<p>In order to set up a basic configuration file and the directories
a user can execute <a class="reference internal" href="#gromacs.config.setup" title="gromacs.config.setup"><code class="xref py py-func docutils literal"><span class="pre">gromacs.config.setup()</span></code></a>.</p>
<p>If the configuration file is edited then one can force a rereading of
the new config file with <a class="reference internal" href="#gromacs.config.get_configuration" title="gromacs.config.get_configuration"><code class="xref py py-func docutils literal"><span class="pre">gromacs.config.get_configuration()</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">gromacs</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_configuration</span><span class="p">()</span>
</pre></div>
</div>
<p>However, this will not update the available command classes (e.g. when new
executables were added to a tool group). In this case one either has to
<a class="reference external" href="http://docs.python.org/library/functions.html#reload" title="(in Python v2.7)"><code class="xref py py-func docutils literal"><span class="pre">reload()</span></code></a> a number of modules (<a class="reference internal" href="../init.html#module-gromacs" title="gromacs"><code class="xref py py-mod docutils literal"><span class="pre">gromacs</span></code></a>, <a class="reference internal" href="#module-gromacs.config" title="gromacs.config"><code class="xref py py-mod docutils literal"><span class="pre">gromacs.config</span></code></a>,
<a class="reference internal" href="tools.html#module-gromacs.tools" title="gromacs.tools"><code class="xref py py-mod docutils literal"><span class="pre">gromacs.tools</span></code></a>) although it is by far easier simply to quit python and
freshly <code class="docutils literal"><span class="pre">import</span> <span class="pre">gromacs</span></code>.</p>
<p>Almost all aspects of <em>GromacsWrapper</em> (paths, names, what is loaded)
can be changed from within the configuration file. The only exception
is the name of the configuration file itself: This is hard-coded as
<code class="docutils literal"><span class="pre">~/.gromacswrapper.cfg</span></code> although it is possible to read other
configuration files with the <em>filename</em> argument to
<a class="reference internal" href="#gromacs.config.get_configuration" title="gromacs.config.get_configuration"><code class="xref py py-func docutils literal"><span class="pre">get_configuration()</span></code></a>.</p>
<div class="section" id="configuration-management">
<h2>Configuration management<a class="headerlink" href="#configuration-management" title="Permalink to this headline">¶</a></h2>
<p>Important configuration variables are</p>
<dl class="data">
<dt id="gromacs.config.configdir">
<code class="descclassname">gromacs.config.</code><code class="descname">configdir</code><em class="property"> = '/Users/oliver/.gromacswrapper'</em><a class="headerlink" href="#gromacs.config.configdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory to store user templates and rc files.
The default value is <code class="docutils literal"><span class="pre">~/.gromacswrapper</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="gromacs.config.path">
<code class="descclassname">gromacs.config.</code><code class="descname">path</code><em class="property"> = ['.', '/Users/oliver/.gromacswrapper/qscripts', '/Users/oliver/.gromacswrapper/templates']</em><a class="headerlink" href="#gromacs.config.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Search path for user queuing scripts and templates. The internal package-supplied
templates are always searched last via <a class="reference internal" href="#gromacs.config.get_templates" title="gromacs.config.get_templates"><code class="xref py py-func docutils literal"><span class="pre">gromacs.config.get_templates()</span></code></a>.
Modify <a class="reference internal" href="#gromacs.config.path" title="gromacs.config.path"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.path</span></code></a> directly in order to customize the template
and qscript searching. By default it has the value <code class="docutils literal"><span class="pre">['.',</span> <span class="pre">qscriptdir,</span>
<span class="pre">templatesdir]</span></code>.
(Note that it is not a good idea to have template files and qscripts with the
same name as they are both searched on the same path.)
<a class="reference internal" href="#gromacs.config.path" title="gromacs.config.path"><code class="xref py py-data docutils literal"><span class="pre">path</span></code></a> is updated whenever cfg is re-read with <a class="reference internal" href="#gromacs.config.get_configuration" title="gromacs.config.get_configuration"><code class="xref py py-func docutils literal"><span class="pre">get_configuration()</span></code></a>.</p>
</dd></dl>

<p>When GromacsWrapper starts up it runs <a class="reference internal" href="#gromacs.config.check_setup" title="gromacs.config.check_setup"><code class="xref py py-func docutils literal"><span class="pre">check_setup()</span></code></a>. This
notifies the user if any config files or directories are missing and
suggests to run <a class="reference internal" href="#gromacs.config.setup" title="gromacs.config.setup"><code class="xref py py-func docutils literal"><span class="pre">setup()</span></code></a>.  The check if the default set up exists
can be suppressed by setting the environment variable
<span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal"><span class="pre">GROMACSWRAPPER_SUPPRESS_SETUP_CHECK</span></code> to &#8216;true&#8217; (&#8216;yes&#8217; and &#8216;1&#8217;
also work).</p>
<div class="section" id="users">
<h3>Users<a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h3>
<p>Users will likely only need to run <a class="reference internal" href="#gromacs.config.setup" title="gromacs.config.setup"><code class="xref py py-func docutils literal"><span class="pre">gromacs.config.setup()</span></code></a> once and
perhaps occasionally execute <a class="reference internal" href="#gromacs.config.get_configuration" title="gromacs.config.get_configuration"><code class="xref py py-func docutils literal"><span class="pre">gromacs.config.get_configuration()</span></code></a>. Mainly
the user is expected to configure <em>GromacsWrapper</em> by editing the configuration
file <code class="docutils literal"><span class="pre">~/.gromacswrapper.cfg</span></code> (which has ini-file syntax as described in
<a class="reference external" href="http://docs.python.org/library/configparser.html#module-ConfigParser" title="(in Python v2.7)"><code class="xref py py-mod docutils literal"><span class="pre">ConfigParser</span></code></a>).</p>
<dl class="function">
<dt id="gromacs.config.setup">
<code class="descclassname">gromacs.config.</code><code class="descname">setup</code><span class="sig-paren">(</span><em>filename='/Users/oliver/.gromacswrapper.cfg'</em><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a default GromacsWrapper global environment.</p>
<ol class="arabic simple">
<li>Create the global config file.</li>
<li>Create the directories in which the user can store template and config files.</li>
</ol>
<p>This function can be run repeatedly without harm.</p>
</dd></dl>

<dl class="function">
<dt id="gromacs.config.get_configuration">
<code class="descclassname">gromacs.config.</code><code class="descname">get_configuration</code><span class="sig-paren">(</span><em>filename='/Users/oliver/.gromacswrapper.cfg'</em><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.get_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads and parses the configuration file.</p>
<p>Default values are loaded and then replaced with the values from
<code class="docutils literal"><span class="pre">~/.gromacswrapper.cfg</span></code> if that file exists. The global
configuration instance <code class="xref py py-data docutils literal"><span class="pre">gromacswrapper.config.cfg</span></code> is updated
as are a number of global variables such as <a class="reference internal" href="#gromacs.config.configdir" title="gromacs.config.configdir"><code class="xref py py-data docutils literal"><span class="pre">configdir</span></code></a>,
<a class="reference internal" href="#gromacs.config.qscriptdir" title="gromacs.config.qscriptdir"><code class="xref py py-data docutils literal"><span class="pre">qscriptdir</span></code></a>, <a class="reference internal" href="#gromacs.config.templatesdir" title="gromacs.config.templatesdir"><code class="xref py py-data docutils literal"><span class="pre">templatesdir</span></code></a>, <a class="reference internal" href="#gromacs.config.logfilename" title="gromacs.config.logfilename"><code class="xref py py-data docutils literal"><span class="pre">logfilename</span></code></a>, ...</p>
<p>Normally, the configuration is only loaded when the <a class="reference internal" href="../init.html#module-gromacs" title="gromacs"><code class="xref py py-mod docutils literal"><span class="pre">gromacs</span></code></a>
package is imported but a re-reading of the configuration can be forced
anytime by calling <a class="reference internal" href="#gromacs.config.get_configuration" title="gromacs.config.get_configuration"><code class="xref py py-func docutils literal"><span class="pre">get_configuration()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a dict with all updated global configuration variables</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gromacs.config.check_setup">
<code class="descclassname">gromacs.config.</code><code class="descname">check_setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.check_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if templates directories are setup and issue a warning and help.</p>
<p>Set the environment variable  <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal"><span class="pre">GROMACSWRAPPER_SUPPRESS_SETUP_CHECK</span></code>
skip the check and make it always return <code class="docutils literal"><span class="pre">True</span></code></p>
<p>:return <code class="docutils literal"><span class="pre">True</span></code> if directories were found and <code class="docutils literal"><span class="pre">False</span></code> otherwise</p>
<blockquote>
<div><div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.3.1: </span>Uses <span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal"><span class="pre">GROMACSWRAPPER_SUPPRESS_SETUP_CHECK</span></code> to suppress check
(useful for scripts run on a server)</p>
</div>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="developers">
<h3>Developers<a class="headerlink" href="#developers" title="Permalink to this headline">¶</a></h3>
<p>Developers are able to access all configuration data through
<a class="reference internal" href="#gromacs.config.cfg" title="gromacs.config.cfg"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.cfg</span></code></a>, which represents the merger of the package default
values and the user configuration file values.</p>
<dl class="data">
<dt id="gromacs.config.cfg">
<code class="descclassname">gromacs.config.</code><code class="descname">cfg</code><em class="property"> = &lt;gromacs.config.GMXConfigParser instance&gt;</em><a class="headerlink" href="#gromacs.config.cfg" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#gromacs.config.cfg" title="gromacs.config.cfg"><code class="xref py py-data docutils literal"><span class="pre">cfg</span></code></a> is the instance of <a class="reference internal" href="#gromacs.config.GMXConfigParser" title="gromacs.config.GMXConfigParser"><code class="xref py py-class docutils literal"><span class="pre">GMXConfigParser</span></code></a> that makes all
global configuration data accessible</p>
</dd></dl>

<dl class="class">
<dt id="gromacs.config.GMXConfigParser">
<em class="property">class </em><code class="descclassname">gromacs.config.</code><code class="descname">GMXConfigParser</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.GMXConfigParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Customized <a class="reference external" href="http://docs.python.org/library/configparser.html#ConfigParser.SafeConfigParser" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">ConfigParser.SafeConfigParser</span></code></a>.</p>
<p>Reads and parses the configuration file.</p>
<p>Default values are loaded and then replaced with the values from
<code class="docutils literal"><span class="pre">~/.gromacswrapper.cfg</span></code> if that file exists. The global
configuration instance <code class="xref py py-data docutils literal"><span class="pre">gromacswrapper.config.cfg</span></code> is updated
as are a number of global variables such as <a class="reference internal" href="#gromacs.config.configdir" title="gromacs.config.configdir"><code class="xref py py-data docutils literal"><span class="pre">configdir</span></code></a>,
<a class="reference internal" href="#gromacs.config.qscriptdir" title="gromacs.config.qscriptdir"><code class="xref py py-data docutils literal"><span class="pre">qscriptdir</span></code></a>, <a class="reference internal" href="#gromacs.config.templatesdir" title="gromacs.config.templatesdir"><code class="xref py py-data docutils literal"><span class="pre">templatesdir</span></code></a>, <a class="reference internal" href="#gromacs.config.logfilename" title="gromacs.config.logfilename"><code class="xref py py-data docutils literal"><span class="pre">logfilename</span></code></a>, ...</p>
<p>Normally, the configuration is only loaded when the <code class="xref py py-mod docutils literal"><span class="pre">gromacswrapper</span></code>
package is imported but a re-reading of the configuration can be forced
anytime by calling <a class="reference internal" href="#gromacs.config.get_configuration" title="gromacs.config.get_configuration"><code class="xref py py-func docutils literal"><span class="pre">get_configuration()</span></code></a>.</p>
<dl class="attribute">
<dt id="gromacs.config.GMXConfigParser.configuration">
<code class="descname">configuration</code><a class="headerlink" href="#gromacs.config.GMXConfigParser.configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict of variables that we make available as globals in the module.</p>
<p>Can be used as</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">GMXConfigParser</span><span class="o">.</span><span class="n">configuration</span><span class="p">)</span>        <span class="c1"># update configdir, templatesdir ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="gromacs.config.GMXConfigParser.getLogLevel">
<code class="descname">getLogLevel</code><span class="sig-paren">(</span><em>section</em>, <em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.GMXConfigParser.getLogLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the textual representation of logging level &#8216;option&#8217; or the number.</p>
<p>Note that option is always interpreted as an UPPERCASE string
and hence integer log levels will not be recognized.</p>
</dd></dl>

<dl class="method">
<dt id="gromacs.config.GMXConfigParser.getpath">
<code class="descname">getpath</code><span class="sig-paren">(</span><em>section</em>, <em>option</em><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.GMXConfigParser.getpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Return option as an expanded path.</p>
</dd></dl>

</dd></dl>

<p>A subset of important data is also made available as top-level package
variables as described under <a class="reference internal" href="#location-of-template-files">Location of template files</a> (for historical
reasons); the same variable are also available in the dict
<a class="reference internal" href="#gromacs.config.configuration" title="gromacs.config.configuration"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.configuration</span></code></a>.</p>
<dl class="data">
<dt id="gromacs.config.configuration">
<code class="descclassname">gromacs.config.</code><code class="descname">configuration</code><em class="property"> = {'templatesdir': '/Users/oliver/.gromacswrapper/templates', 'loglevel_file': 10, 'logfilename': 'gromacs.log', 'qscriptdir': '/Users/oliver/.gromacswrapper/qscripts', 'loglevel_console': 20, 'configfilename': '/Users/oliver/.gromacswrapper.cfg', 'path': ['.', '/Users/oliver/.gromacswrapper/qscripts', '/Users/oliver/.gromacswrapper/templates'], 'configdir': '/Users/oliver/.gromacswrapper'}</em><a class="headerlink" href="#gromacs.config.configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict containing important configuration variables, populated by
<a class="reference internal" href="#gromacs.config.get_configuration" title="gromacs.config.get_configuration"><code class="xref py py-func docutils literal"><span class="pre">get_configuration()</span></code></a> (mainly a shortcut; use <a class="reference internal" href="#gromacs.config.cfg" title="gromacs.config.cfg"><code class="xref py py-data docutils literal"><span class="pre">cfg</span></code></a> in most cases).</p>
</dd></dl>

<p>Default values are hard-coded in</p>
<dl class="data">
<dt id="gromacs.config.CONFIGNAME">
<code class="descclassname">gromacs.config.</code><code class="descname">CONFIGNAME</code><em class="property"> = '/Users/oliver/.gromacswrapper.cfg'</em><a class="headerlink" href="#gromacs.config.CONFIGNAME" title="Permalink to this definition">¶</a></dt>
<dd><p>Default name of the global configuration file.</p>
</dd></dl>

<dl class="data">
<dt id="gromacs.config.defaults">
<code class="descclassname">gromacs.config.</code><code class="descname">defaults</code><em class="property"> = {'templatesdir': '/Users/oliver/.gromacswrapper/templates', 'loglevel_file': 'DEBUG', 'logfilename': 'gromacs.log', 'managerdir': '/Users/oliver/.gromacswrapper/managers', 'qscriptdir': '/Users/oliver/.gromacswrapper/qscripts', 'loglevel_console': 'INFO', 'configdir': '/Users/oliver/.gromacswrapper'}</em><a class="headerlink" href="#gromacs.config.defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>dict() -&gt; new empty dictionary
dict(mapping) -&gt; new dictionary initialized from a mapping object&#8217;s</p>
<blockquote>
<div>(key, value) pairs</div></blockquote>
<dl class="docutils">
<dt>dict(iterable) -&gt; new dictionary initialized as if via:</dt>
<dd><p class="first">d = {}
for k, v in iterable:</p>
<blockquote class="last">
<div>d[k] = v</div></blockquote>
</dd>
<dt>dict(<a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs) -&gt; new dictionary initialized with the name=value pairs</dt>
<dd>in the keyword argument list.  For example:  dict(one=1, two=2)</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="accessing-configuration-and-template-files">
<h3>Accessing configuration and template files<a class="headerlink" href="#accessing-configuration-and-template-files" title="Permalink to this headline">¶</a></h3>
<p>The following functions can be used to access configuration data. Note that
files are searched first with their full filename, then in all directories
listed in <a class="reference internal" href="#gromacs.config.path" title="gromacs.config.path"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.path</span></code></a>, and finally within the package itself.</p>
<dl class="function">
<dt id="gromacs.config.get_template">
<code class="descclassname">gromacs.config.</code><code class="descname">get_template</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.get_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Find template file <em>t</em> and return its real path.</p>
<p><em>t</em> can be a single string or a list of strings. A string
should be one of</p>
<ol class="arabic simple">
<li>a relative or absolute path,</li>
<li>a file in one of the directories listed in <a class="reference internal" href="#gromacs.config.path" title="gromacs.config.path"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.path</span></code></a>,</li>
<li>a filename in the package template directory (defined in the template dictionary
<a class="reference internal" href="#gromacs.config.templates" title="gromacs.config.templates"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.templates</span></code></a>) or</li>
<li>a key into <a class="reference internal" href="#gromacs.config.templates" title="gromacs.config.templates"><code class="xref py py-data docutils literal"><span class="pre">templates</span></code></a>.</li>
</ol>
<p>The first match (in this order) is returned. If the argument is a
single string then a single string is returned, otherwise a list
of strings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><em>t</em> : template file or key (string or list of strings)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">os.path.realpath(<em>t</em>) (or a list thereof)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> if no file can be located.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gromacs.config.get_templates">
<code class="descclassname">gromacs.config.</code><code class="descname">get_templates</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.get_templates" title="Permalink to this definition">¶</a></dt>
<dd><p>Find template file(s) <em>t</em> and return their real paths.</p>
<p><em>t</em> can be a single string or a list of strings. A string should
be one of</p>
<ol class="arabic simple">
<li>a relative or absolute path,</li>
<li>a file in one of the directories listed in <a class="reference internal" href="#gromacs.config.path" title="gromacs.config.path"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.path</span></code></a>,</li>
<li>a filename in the package template directory (defined in the template dictionary
<a class="reference internal" href="#gromacs.config.templates" title="gromacs.config.templates"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.templates</span></code></a>) or</li>
<li>a key into <a class="reference internal" href="#gromacs.config.templates" title="gromacs.config.templates"><code class="xref py py-data docutils literal"><span class="pre">templates</span></code></a>.</li>
</ol>
<p>The first match (in this order) is returned for each input argument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><em>t</em> : template file or key (string or list of strings)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of os.path.realpath(<em>t</em>)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> if no file can be located.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<p>Gromacs commands log their invocation to a log file; typically at
loglevel <em>INFO</em> (see the python <a class="reference external" href="http://docs.python.org/library/logging.html">logging module</a> for details).</p>
<dl class="data">
<dt id="gromacs.config.logfilename">
<code class="descclassname">gromacs.config.</code><code class="descname">logfilename</code><em class="property"> = 'gromacs.log'</em><a class="headerlink" href="#gromacs.config.logfilename" title="Permalink to this definition">¶</a></dt>
<dd><p>File name for the log file; all gromacs command and many utility functions (e.g. in
<a class="reference internal" href="../blocks/cbook.html#module-gromacs.cbook" title="gromacs.cbook"><code class="xref py py-mod docutils literal"><span class="pre">gromacs.cbook</span></code></a> and <a class="reference internal" href="../blocks/setup.html#module-gromacs.setup" title="gromacs.setup"><code class="xref py py-mod docutils literal"><span class="pre">gromacs.setup</span></code></a>) append messages there. Warnings and
errors are also recorded here. The default is <em>gromacs.log</em>.</p>
</dd></dl>

<dl class="data">
<dt id="gromacs.config.loglevel_console">
<code class="descclassname">gromacs.config.</code><code class="descname">loglevel_console</code><em class="property"> = 20</em><a class="headerlink" href="#gromacs.config.loglevel_console" title="Permalink to this definition">¶</a></dt>
<dd><p>The default loglevel that is still printed to the console.</p>
</dd></dl>

<dl class="data">
<dt id="gromacs.config.loglevel_file">
<code class="descclassname">gromacs.config.</code><code class="descname">loglevel_file</code><em class="property"> = 10</em><a class="headerlink" href="#gromacs.config.loglevel_file" title="Permalink to this definition">¶</a></dt>
<dd><p>The default loglevel that is still written to the <a class="reference internal" href="#gromacs.config.logfilename" title="gromacs.config.logfilename"><code class="xref py py-data docutils literal"><span class="pre">logfilename</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="gromacs-tools-and-scripts">
<h2>Gromacs tools and scripts<a class="headerlink" href="#gromacs-tools-and-scripts" title="Permalink to this headline">¶</a></h2>
<p>Fundamentally, GromacsWrapper makes existing Gromacs tools
(executables) available as functions. In order for this to work, these
executables must be found in the environment of the Python process
that runs GromacsWrapper, and the user must list all the tools that
are to be made available.</p>
<div class="section" id="setting-up-the-environment">
<h3>Setting up the environment<a class="headerlink" href="#setting-up-the-environment" title="Permalink to this headline">¶</a></h3>
<p>The standard way to set up the Gromacs environment is to source <code class="docutils literal"><span class="pre">GMXRC</span></code> in
the shell before running the Python process. <code class="docutils literal"><span class="pre">GMXRC</span></code> adjusts a number of
environment variables (such as <span class="target" id="index-3"></span><code class="xref std std-envvar docutils literal"><span class="pre">PATH</span></code> and <span class="target" id="index-4"></span><code class="xref std std-envvar docutils literal"><span class="pre">LD_LIBRARY_PATH</span></code>)
but also sets Gromacs-specific environment variables such as <span class="target" id="index-5"></span><code class="xref std std-envvar docutils literal"><span class="pre">GMXBIN</span></code>,
<span class="target" id="index-6"></span><code class="xref std std-envvar docutils literal"><span class="pre">GMXDATA</span></code>, and many others:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">GMXRC</span>
</pre></div>
</div>
<p>(where the path to <code class="docutils literal"><span class="pre">GMXRC</span></code> is often set differently to disntinguish different
installed versions of Gromacs).</p>
<p>Alternatively, GromacsWrapper can itself source a <code class="docutils literal"><span class="pre">GMXRC</span></code> file and set the
environment with the <a class="reference internal" href="#gromacs.config.set_gmxrc_environment" title="gromacs.config.set_gmxrc_environment"><code class="xref py py-func docutils literal"><span class="pre">set_gmxrc_environment()</span></code></a> function. The path to a
<code class="docutils literal"><span class="pre">GMXRC</span></code> file can be set in the config file in the <code class="docutils literal"><span class="pre">[Gromacs]</span></code> section as</p>
<blockquote>
<div><p>[Gromacs]</p>
<p>GMXRC = /usr/local/bin/GMXRC</p>
</div></blockquote>
<p>When GromacsWrapper starts up, it tries to set the environment using the
<code class="docutils literal"><span class="pre">GMXRC</span></code> defined in the config file. If this is left empty or is not in the
file, nothing is being done.</p>
<dl class="function">
<dt id="gromacs.config.set_gmxrc_environment">
<code class="descclassname">gromacs.config.</code><code class="descname">set_gmxrc_environment</code><span class="sig-paren">(</span><em>gmxrc</em><span class="sig-paren">)</span><a class="headerlink" href="#gromacs.config.set_gmxrc_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the environment from <code class="docutils literal"><span class="pre">GMXRC</span></code> provided in <em>gmxrc</em>.</p>
<p>Runs <code class="docutils literal"><span class="pre">GMXRC</span></code> in a subprocess and puts environment variables loaded by it
into this Python environment.</p>
<p>If <em>gmxrc</em> evaluates to <code class="docutils literal"><span class="pre">False</span></code> then nothing is done. If errors occur
then only a warning will be logged. Thus, it should be safe to just call
this function.</p>
</dd></dl>

</div>
<div class="section" id="list-of-tools">
<h3>List of tools<a class="headerlink" href="#list-of-tools" title="Permalink to this headline">¶</a></h3>
<p>The list of Gromacs tools can be specified in the config file in the
<code class="docutils literal"><span class="pre">[Gromacs]</span></code> section with the <code class="docutils literal"><span class="pre">tools</span></code> variable.</p>
<p>The tool groups are a list of names that determines which tools are made
available as classes in <a class="reference internal" href="tools.html#module-gromacs.tools" title="gromacs.tools"><code class="xref py py-mod docutils literal"><span class="pre">gromacs.tools</span></code></a>. If not provided
GromacsWrapper will first try to load Gromacs 5.x then Gromacs 4.x
tools.</p>
<p>If you choose to provide a list, the Gromacs tools section of the config
file can be like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Gromacs</span><span class="p">]</span>
<span class="c1"># Release of the Gromacs package to which information in this sections applies.</span>
<span class="n">release</span> <span class="o">=</span> <span class="mf">4.5</span><span class="o">.</span><span class="mi">3</span>

<span class="c1"># tools contains the file names of all Gromacs tools for which classes are</span>
<span class="c1"># generated. Editing this list has only an effect when the package is</span>
<span class="c1"># reloaded.</span>
<span class="c1"># (Note that this example has a much shorter list than the actual default.)</span>
<span class="n">tools</span> <span class="o">=</span>
      <span class="n">editconf</span> <span class="n">make_ndx</span> <span class="n">grompp</span> <span class="n">genion</span> <span class="n">genbox</span>
      <span class="n">grompp</span> <span class="n">pdb2gmx</span> <span class="n">mdrun</span> <span class="n">mdrun_d</span>

<span class="c1"># which tool groups to make available</span>
<span class="n">groups</span> <span class="o">=</span> <span class="n">tools</span> <span class="n">extra</span>
</pre></div>
</div>
<p>For Gromacs 5.x use a section like the following, where driver commands
are supplied:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Gromacs</span><span class="p">]</span>
<span class="c1"># Release of the Gromacs package to which information in this sections applies.</span>
<span class="n">release</span> <span class="o">=</span> <span class="mf">5.0</span><span class="o">.</span><span class="mi">5</span>

<span class="c1"># GMXRC contains the path for GMXRC file which will be loaded. If not</span>
<span class="n">provided</span> <span class="ow">is</span> <span class="n">expected</span> <span class="n">that</span> <span class="n">it</span> <span class="n">was</span> <span class="n">sourced</span> <span class="k">as</span> <span class="n">usual</span> <span class="n">before</span> <span class="n">importing</span> <span class="n">this</span>
<span class="n">library</span><span class="o">.</span>
<span class="n">GMXRC</span> <span class="o">=</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">gromacs</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">GMXRC</span>

<span class="c1"># tools contains the command names of all Gromacs tools for which classes are generated.</span>
<span class="c1"># Editing this list has only an effect when the package is reloaded.</span>
<span class="c1"># (Note that this example has a much shorter list than the actual default.)</span>
<span class="n">tools</span> <span class="o">=</span> <span class="n">gmx</span> <span class="n">gmx_d</span>
</pre></div>
</div>
<p>For example, on the commandline you would run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">gmx</span> <span class="n">grompp</span> <span class="o">-</span><span class="n">f</span> <span class="n">md</span><span class="o">.</span><span class="n">mdp</span> <span class="o">-</span><span class="n">c</span> <span class="n">system</span><span class="o">.</span><span class="n">gro</span> <span class="o">-</span><span class="n">p</span> <span class="n">topol</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span><span class="n">o</span> <span class="n">md</span><span class="o">.</span><span class="n">tpr</span>
</pre></div>
</div>
<p>and within GromacsWrapper this would become</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">gromacs</span><span class="o">.</span><span class="n">grompp</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="s2">&quot;md.mdp&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;system.gro&quot;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="s2">&quot;topol.top&quot;</span><span class="p">,</span> <span class="n">o</span><span class="o">=</span><span class="s2">&quot;md.tpr&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Because of <a class="reference external" href="http://www.gromacs.org/Documentation/How-tos/Tool_Changes_for_5.0">changes in the Gromacs tool in 5.x</a>,
GromacsWrapper scripts might break, even if the tool
names are still the same.</p>
</div>
</div>
</div>
<div class="section" id="location-of-template-files">
<h2>Location of template files<a class="headerlink" href="#location-of-template-files" title="Permalink to this headline">¶</a></h2>
<p><em>Template variables</em> list files in the package that can be used as
templates such as run input files. Because the package can be a zipped
egg we actually have to unwrap these files at this stage but this is
completely transparent to the user.</p>
<dl class="data">
<dt id="gromacs.config.qscriptdir">
<code class="descclassname">gromacs.config.</code><code class="descname">qscriptdir</code><em class="property"> = '/Users/oliver/.gromacswrapper/qscripts'</em><a class="headerlink" href="#gromacs.config.qscriptdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory to store user supplied queuing system scripts.
The default value is <code class="docutils literal"><span class="pre">~/.gromacswrapper/qscripts</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="gromacs.config.templatesdir">
<code class="descclassname">gromacs.config.</code><code class="descname">templatesdir</code><em class="property"> = '/Users/oliver/.gromacswrapper/templates'</em><a class="headerlink" href="#gromacs.config.templatesdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory to store user supplied template files such as mdp files.
The default value is <code class="docutils literal"><span class="pre">~/.gromacswrapper/templates</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="gromacs.config.managerdir">
<code class="descclassname">gromacs.config.</code><code class="descname">managerdir</code><em class="property"> = '/Users/oliver/.gromacswrapper/managers'</em><a class="headerlink" href="#gromacs.config.managerdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory to store configuration files for remote queuing systems
<code class="xref py py-class docutils literal"><span class="pre">gromacs.qsub.Manager</span></code> instances.
The default value is <code class="docutils literal"><span class="pre">~/.gromacswrapper/managers</span></code>.</p>
</dd></dl>

<dl class="data">
<dt id="gromacs.config.templates">
<code class="descclassname">gromacs.config.</code><code class="descname">templates</code><em class="property"> = {'md_OPLSAA.mdp': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/md_OPLSAA.mdp', 'em.mdp': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/em.mdp', 'darwin.sh': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/darwin.sh', 'gromacswrapper_465.cfg': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/gromacswrapper_465.cfg', 'gromacswrapper.cfg': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/gromacswrapper.cfg', 'md_G43a1.mdp': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/md_G43a1.mdp', 'local.sh': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/local.sh', 'md_CHARMM27.mdp': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/md_CHARMM27.mdp', 'md_CHARMM27_gpu.mdp': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/md_CHARMM27_gpu.mdp', 'md_OPLSAA_gpu.mdp': '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/md_OPLSAA_gpu.mdp'}</em><a class="headerlink" href="#gromacs.config.templates" title="Permalink to this definition">¶</a></dt>
<dd><p><em>GromacsWrapper</em> comes with a number of templates for run input files
and queuing system scripts. They are provided as a convenience and
examples but <strong>WITHOUT ANY GUARANTEE FOR CORRECTNESS OR SUITABILITY FOR
ANY PURPOSE</strong>.</p>
<p>All template filenames are stored in
<a class="reference internal" href="#gromacs.config.templates" title="gromacs.config.templates"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.templates</span></code></a>. Templates have to be extracted from
the GromacsWrapper python egg file because they are used by external
code: find the actual file locations from this variable.</p>
<p><strong>Gromacs mdp templates</strong></p>
<blockquote>
<div><p>These are supplied as examples and there is <strong>NO GUARANTEE THAT THEY
PRODUCE SENSIBLE OUTPUT</strong> &#8212; check for yourself!  Note that only
existing parameter names can be modified with
<a class="reference internal" href="../blocks/cbook.html#gromacs.cbook.edit_mdp" title="gromacs.cbook.edit_mdp"><code class="xref py py-func docutils literal"><span class="pre">gromacs.cbook.edit_mdp()</span></code></a> at the moment; if in doubt add the
parameter with its gromacs default value (or empty values) and
modify later with <a class="reference internal" href="../blocks/cbook.html#gromacs.cbook.edit_mdp" title="gromacs.cbook.edit_mdp"><code class="xref py py-func docutils literal"><span class="pre">edit_mdp()</span></code></a>.</p>
<p>The safest bet is to use one of the <code class="docutils literal"><span class="pre">mdout.mdp</span></code> files produced by
<code class="xref py py-func docutils literal"><span class="pre">gromacs.grompp()</span></code> as a template as this mdp contains all
parameters that are legal in the current version of Gromacs.</p>
</div></blockquote>
<p><strong>Queuing system templates</strong></p>
<blockquote>
<div>The queing system scripts are highly specific and you will need to add your
own into <a class="reference internal" href="#gromacs.config.qscriptdir" title="gromacs.config.qscriptdir"><code class="xref py py-data docutils literal"><span class="pre">gromacs.config.qscriptdir</span></code></a>.
See <a class="reference internal" href="../blocks/qsub.html#module-gromacs.qsub" title="gromacs.qsub"><code class="xref py py-mod docutils literal"><span class="pre">gromacs.qsub</span></code></a> for the format and how these files are processed.</div></blockquote>
</dd></dl>

<dl class="data">
<dt id="gromacs.config.qscript_template">
<code class="descclassname">gromacs.config.</code><code class="descname">qscript_template</code><em class="property"> = '/Volumes/Data/oliver/Biop/Projects/Methods/GromacsWrapper/gromacs/templates/local.sh'</em><a class="headerlink" href="#gromacs.config.qscript_template" title="Permalink to this definition">¶</a></dt>
<dd><p>The default template for SGE/PBS run scripts.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="environment.html" title="gromacs.environment – Run time modification of behaviour"
             >next</a> |</li>
        <li class="right" >
          <a href="core.html" title="gromacs.core – Core functionality"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">GromacsWrapper 0.6.1 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../gromacs.html" >GromacsWrapper package</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../core.html" >Gromacs core modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2009-2016, The Authors of GromacsWrapper (see AUTHORS).
      Last updated on Sep 16, 2016.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>