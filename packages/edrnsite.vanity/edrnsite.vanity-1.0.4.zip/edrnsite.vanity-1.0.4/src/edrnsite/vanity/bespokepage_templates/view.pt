<html
    xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'
    xmlns:tal='http://xml.zope.org/namespaces/tal'
    xmlns:metal='http://xml.zope.org/namespaces/metal'
    xmlns:i18n='http://xml.zope.org/namespaces/i18n'
    i18n:domain='edrnsite.vanity'
    metal:use-macro='context/main_template/macros/master'>
    <head>
        <title>Bespoke Page View</title>
        <metal:block fill-slot='top_slot' tal:define='
            dummy_disable_border python:request.set("disable_border", 1);
            dummy_disable_right  python:request.set("disable_plone.rightcolumn", 1);
        '/>
        <metal:block fill-slot='style_slot'>
            <link rel='stylesheet' type='text/css' tal:define='navroot context/@@plone_portal_state/navigation_root_url'
                tal:attributes='href string:${navroot}/++resource++edrnsite.vanity/bespoke.css'
            />
        </metal:block>
    </head>
    <body>
        <metal:main fill-slot='main'>
            <tal:main-macro metal:define-macro='main' tal:define='isMine view/isMine;'>
                <p tal:condition='isMine' class='yourVanityPage'>
                    <span class='bespokeMessage' i18n:translate='bespokeYours'>
                        This is <em i18n:name='emphaticYour'>your</em> page!
                    </span>
                    <a href='#' class='bespokeButton' i18n:translate='bespokeEditButton' tal:attributes='href view/editURL'>
                        Update It
                    </a>
                </p>
                <div class='bespokePersonalCard'>
                    <div tal:replace='structure provider:plone.abovecontenttitle'/>
                    <div class='bespokePhoto' tal:define='photograph nocall:context/photograph' tal:condition='nocall:photograph'>
                        <img src='#' alt='Meg Ryan' tal:replace='structure context/@@images/photograph/mini'/>
                    </div>
                    <h1 class='documentFirstHeading' tal:content='context/title'>blah</h1>
                    <!-- <div tal:replace='structure provider:plone.belowcontenttitle'/> no byline please -->
                    <p class='documentDescription' tal:content='context/description'>blah</p>
                </div>
                <div tal:replace='structure provider:plone.abovecontentbody'/>

                <div class='bespokeBody'>
                    <h2 i18n:translate='bespokePersonals'>Personal Info</h2>
                    <dl>
                        <dt i18n:translate='specialty'>Specialty:</dt>
                        <dd tal:content='context/specialty'>Messing around</dd>
                        <dt i18n:translate='edrnTitle'>EDRN Title:</dt>
                        <dd tal:content='context/edrnTitle'>Chief Jester</dd>
                        <dt i18n:translate='telephone'>Telephone:</dt>
                        <dd tal:content='context/person/phone|nothing'>+1 555 555 5555</dd>
                        <tal:if condition='context/showMbox|nothing'>
                            <dt i18n:translate='emailAddress'>Email Address:</dt>
                            <dd tal:content='context/person/mbox|nothing'>whowever@bob.com</dd>
                        </tal:if>
                    </dl>
                    <p class='discreet'>To update contact information, please visit the
                        <a href='https://www.compass.fhcrc.org/enterEDRN'>Data Management and Coordinating Center</a>.
                    </p>
                    <table>
                        <tr>
                            <td style='padding-right: 1em; vertical-align: top;' tal:define='biomarkers view/biomarkers'>
                                <h2 i18n:translate='bespokeBiomarkers'>My Biomarkers</h2>
                                <p class='discreet' i18n:translate='noBespokeBiomarkers' tal:condition='not:biomarkers'>
                                    I don't have any biomarkers yet.
                                </p>
                                <ul tal:condition='biomarkers'>
                                    <li tal:repeat='biomarker biomarkers'>
                                        <a href='#' title='A really snazzy biomarker'
                                            tal:content='python:biomarker["title"]'
                                            tal:attributes='
                                                href python:biomarker["url"];
                                                title python:biomarker["description"];
                                            '>
                                            SNAZ-1
                                        </a>
                                    </li>
                                </ul>
                            </td>
                            <td style='padding-right: 1em; vertical-align: top;' tal:define='datasets view/datasets'>
                                <h2 i18n:translate='bespokeData'>My Science Data</h2>
                                <p class='discreet' i18n:translate='noBespokeData' tal:condition='not:datasets'>
                                    I don't have any science data yet.
                                </p>
                                <ul tal:condition='datasets'>
                                    <li tal:repeat='dataset datasets'>
                                        <a href='#' title='A really spiffy dataset'
                                            tal:content='python:dataset["title"]'
                                            tal:attributes='
                                                href python:dataset["url"];
                                                title python:dataset["description"];
                                            '>
                                            spiffy.dat
                                        </a>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                    </table>
                    <h2 i18n:translate='bespokePubs'>My Publications</h2>
                    <p class='discreet' i18n:translate='noBespokePubs'>I don't have any publications yet.</p>
                </div>

                <div tal:condition='isMine' tal:omit-tag=''>
                    <p tal:condition='view/isPublic' class='yourVanityPage'>
                        <span class='bespokeMessage' i18n:translate='bespokePublic'>
                            Your page is currently <strong i18n:name='public'>public</strong>.
                        </span>
                        <a href='#' class='bespokeButton' i18n:translate='bespokePrivatize' tal:attributes='href view/privateURL'>
                            Make private
                        </a>
                    </p>
                    <p tal:condition='view/isPrivate' class='yourVanityPage'>
                        <span class='bespokeMessage' i18n:translate='bespokePrivate'>
                            Your page is currently <strong i18n:name='private'>private</strong>.
                        </span>
                        <a href='#' class='bespokeButton' i18n:translate='bespokePublish' tal:attributes='href view/publishURL'>
                            Make public
                        </a>
                    </p>
                </div>
                <div tal:replace='structure provider:plone.belowcontentbody'/>
            </tal:main-macro>
        </metal:main>
    </body>
</html>
