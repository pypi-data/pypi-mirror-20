rule report_variant:
    """
    Create a HTML report of detected variants.
    
    Required input:
        __report_variant__input: vcf file

    Required output:
        __report_variant__html_output: html file
        __report_variant__csv_output: csv file

    Contributors:
        Sequana consortium
    """
    input:
        vcf = __report_variant__input
    output:
        html = __report_variant__html_output,
        csv = __report_variant__csv_output
    params:
        outdir = __report_variant__directory
    run:
        from sequana import vcf_filter
        from sequana.reporting import report_variant

        vcf_record = vcf_filter.VCF(input["vcf"])

        r = report_variant.VariantReport(directory=params.outdir, 
                csv_file=output.csv, output_filename="report_variant.html")
        r.jinja["main_link"] = "index.html"
        r.set_data(vcf_record)
        r.create_report()
