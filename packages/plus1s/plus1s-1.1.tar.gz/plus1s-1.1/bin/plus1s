#!/usr/bin/env python

import sys
import plus1s
import argparse


DESP = '''
Are you a real fans?
'''

EVAL_MSG = '''
#!/bin/bash

function plus1s_check {
    if [[ $? -ne 0 ]]; then
        plus1s -f
    fi
}

if [[ $0 == "bash" ]]; then
    PROMPT_COMMAND='plus1s_check'
fi    


alias gou='echo 苟利国家生死以，岂因祸福避趋之'
'''

if __name__ == '__main__':
    parser = argparse.ArgumentParser(DESP)
    parser.add_argument('-s', '--startup', action='store_true',
                        help='Show the message at the start of the shell.')
    parser.add_argument('-f', '--failure', action='store_true',
                        help='Show the message after the failure of executing command.')
    parser.add_argument('-e', '--eval', action='store_true',
                        help='Show the eval message.')
    args = parser.parse_args(sys.argv[1:])

    if args.startup:
        plus1s.start()
    elif args.failure:
        plus1s.show_error_message()
    elif args.eval:
        print(EVAL_MSG)
    else:
        plus1s.plus1s()

